<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Teleporter</title>
  <subtitle>如果没能一次成功，那就叫它1.0版吧</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://teleporter.top/"/>
  <updated>2017-05-04T04:51:13.787Z</updated>
  <id>https://teleporter.top/</id>
  
  <author>
    <name>潇洒的来</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>一个简单的App</title>
    <link href="https://teleporter.top/2017/04/30/%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84App/"/>
    <id>https://teleporter.top/2017/04/30/一个简单的App/</id>
    <published>2017-04-30T12:40:10.000Z</published>
    <updated>2017-05-04T04:51:13.787Z</updated>
    
    <content type="html"><![CDATA[<p>&emsp;&emsp;主页搭建完成后，我们将实现移动端的Note。总的来说，web端搭建成功后。这个note还是比较简单的。<br><a id="more"></a></p>
<h2 id="Github托管代码"><a href="#Github托管代码" class="headerlink" title="Github托管代码"></a>Github托管代码</h2><p>&emsp;&emsp;项目所在的<a href="https://github.com/Xiaosadelai/WebAssistant" target="_blank" rel="external">Github地址</a></p>
<h2 id="编写过程"><a href="#编写过程" class="headerlink" title="编写过程"></a>编写过程</h2><h3 id="Gradle文件"><a href="#Gradle文件" class="headerlink" title="Gradle文件"></a>Gradle文件</h3><p>&emsp;&emsp;在gradle中添加用到的第三方库,这里主要使用了Gson,Okhttp,recyclerview<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">compile &apos;com.android.support:appcompat-v7:25.3.1&apos;</div><div class="line">    compile &apos;com.android.support.constraint:constraint-layout:1.0.2&apos;</div><div class="line">    compile &apos;com.squareup.okhttp3:okhttp:3.4.1&apos;</div><div class="line">    compile &apos;com.google.code.gson:gson:2.7&apos;</div><div class="line">    compile &apos;com.android.support:recyclerview-v7:24.2.1&apos;</div><div class="line">    compile &apos;com.android.support:design:24.2.0&apos;</div></pre></td></tr></table></figure></p>
<h3 id="HttpUtil工具类"><a href="#HttpUtil工具类" class="headerlink" title="HttpUtil工具类"></a>HttpUtil工具类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public class HttpUtil &#123;</div><div class="line">    public static void sendOkHttpRequest(String address, okhttp3.Callback callback)&#123;</div><div class="line">        OkHttpClient client=new OkHttpClient();</div><div class="line">        Request request=new Request.Builder()</div><div class="line">                .url(address)</div><div class="line">                .build();</div><div class="line">        client.newCall(request).enqueue(callback);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Notes实体类"><a href="#Notes实体类" class="headerlink" title="Notes实体类"></a>Notes实体类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">public class Notes &#123;</div><div class="line">        private int id;</div><div class="line">        private String content;</div><div class="line">        private String time;</div><div class="line">        private int status;</div><div class="line">        public int getId() &#123;</div><div class="line">            return id;</div><div class="line">        &#125;</div><div class="line">        public void setId(int id) &#123;</div><div class="line">            this.id = id;</div><div class="line">        &#125;</div><div class="line">        public String getContent() &#123;</div><div class="line">            return content;</div><div class="line">        &#125;</div><div class="line">        public void setContent(String content) &#123;</div><div class="line">            this.content = content;</div><div class="line">        &#125;</div><div class="line">        public String  getTime() &#123;</div><div class="line">            return time;</div><div class="line">        &#125;</div><div class="line">        public void setTime(String  time) &#123;</div><div class="line">            this.time = time;</div><div class="line">        &#125;</div><div class="line">        public int getStatus() &#123;</div><div class="line">            return status;</div><div class="line">        &#125;</div><div class="line">        public void setStatus(int status) &#123;</div><div class="line">            this.status = status;</div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="编写NotesAdapter"><a href="#编写NotesAdapter" class="headerlink" title="编写NotesAdapter"></a>编写NotesAdapter</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line">public class NotesAdapter extends RecyclerView.Adapter&lt;NotesAdapter.ViewHolder&gt;&#123;</div><div class="line">    final Handler handler;</div><div class="line"></div><div class="line">    public List&lt;Notes&gt; notesList;</div><div class="line"></div><div class="line">    class ViewHolder extends RecyclerView.ViewHolder&#123;</div><div class="line">        TextView numberText,contentText,timeText;</div><div class="line">        Button button;</div><div class="line">        public ViewHolder(View itemView) &#123;</div><div class="line">            super(itemView);</div><div class="line">            numberText= (TextView) itemView.findViewById(R.id.number);</div><div class="line">            contentText= (TextView) itemView.findViewById(R.id.content);</div><div class="line">            timeText= (TextView) itemView.findViewById(R.id.time);</div><div class="line">            button= (Button) itemView.findViewById(R.id.button);</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    //用到主线程的handler,需要在Adapter构造时候传入handler参数</div><div class="line">    public NotesAdapter(Handler handler, List&lt;Notes&gt; mnotesList)&#123;</div><div class="line">        this.handler = handler;</div><div class="line">        notesList=mnotesList;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) &#123;</div><div class="line">        View view= LayoutInflater.from(parent.getContext()).inflate(R.layout.note_item,parent,false);</div><div class="line">        ViewHolder holder=new ViewHolder(view);</div><div class="line">        return holder;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void onBindViewHolder(final ViewHolder holder, final int position) &#123;</div><div class="line">        Notes notes=notesList.get(position);</div><div class="line">        holder.numberText.setText(String.valueOf(position+1));</div><div class="line">        holder.contentText.setText(notes.getContent());</div><div class="line">        holder.timeText.setText(notes.getTime());</div><div class="line">        holder.button.setOnClickListener(new View.OnClickListener() &#123;</div><div class="line">            @Override</div><div class="line">            public void onClick(final View v) &#123;</div><div class="line">                final int id=notesList.get(position).getId();</div><div class="line"></div><div class="line">                String url= Constant.HTTP_DELETE+id;</div><div class="line">                HttpUtil.sendOkHttpRequest(url, new Callback() &#123;</div><div class="line">                    @Override</div><div class="line">                    public void onFailure(Call call, IOException e) &#123;</div><div class="line">                        Message msg=new Message();</div><div class="line">                        msg.what=0x88;</div><div class="line">                        handler.sendMessage(msg);</div><div class="line">                    &#125;</div><div class="line">                    @Override</div><div class="line">                    public void onResponse(Call call, Response response) throws IOException &#123;</div><div class="line">                        Message msg=new Message();</div><div class="line">                        msg.what=0x89;</div><div class="line">                        handler.sendMessage(msg);</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public int getItemCount() &#123;</div><div class="line">        return notesList.size();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="MainActivity布局"><a href="#MainActivity布局" class="headerlink" title="MainActivity布局"></a>MainActivity布局</h3><p>&emsp;&emsp;这里用FrameLayout布局，添加fab</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</div><div class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot;</div><div class="line">    tools:context=&quot;com.pansaian.webassistant.MainActivity&quot;&gt;</div><div class="line">    &lt;android.support.v7.widget.Toolbar</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;?attr/actionBarSize&quot;</div><div class="line">        android:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;</div><div class="line">        app:popupTheme=&quot;@style/AlertDialog.AppCompat.Light&quot;</div><div class="line">        android:background=&quot;?attr/colorPrimary&quot;</div><div class="line">        android:id=&quot;@+id/toolbar&quot;&gt;</div><div class="line">    &lt;/android.support.v7.widget.Toolbar&gt;</div><div class="line">    &lt;android.support.v7.widget.RecyclerView</div><div class="line">        android:paddingTop=&quot;?attr/actionBarSize&quot;</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:id=&quot;@+id/recycler_view&quot;</div><div class="line">        android:layout_height=&quot;match_parent&quot;&gt;</div><div class="line">    &lt;/android.support.v7.widget.RecyclerView&gt;</div><div class="line">&lt;android.support.design.widget.FloatingActionButton</div><div class="line">        android:id=&quot;@+id/button_add_note&quot;</div><div class="line">        android:layout_width=&quot;wrap_content&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        android:layout_gravity=&quot;bottom|right&quot;</div><div class="line">        android:layout_marginBottom=&quot;30dp&quot;</div><div class="line">        android:layout_marginRight=&quot;60dp&quot;</div><div class="line">        android:src=&quot;@drawable/ic_action_new&quot;</div><div class="line">        android:elevation=&quot;10dp&quot;</div><div class="line">        app:fabSize=&quot;normal&quot;</div><div class="line">        app:pressedTranslationZ=&quot;8dp&quot;</div><div class="line">        app:rippleColor=&quot;#ff87eb&quot; /&gt;</div><div class="line">&lt;/FrameLayout&gt;</div></pre></td></tr></table></figure>
<h3 id="MainActivity业务逻辑"><a href="#MainActivity业务逻辑" class="headerlink" title="MainActivity业务逻辑"></a>MainActivity业务逻辑</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div></pre></td><td class="code"><pre><div class="line">public class MainActivity extends AppCompatActivity &#123;</div><div class="line">    private static final String TAG =&quot;MainActivity&quot; ;</div><div class="line">    public  TextView text;</div><div class="line">    FloatingActionButton fab;</div><div class="line">    public RecyclerView recyclerView;</div><div class="line">    //handler 处理Message并更新主UI</div><div class="line">    private   Handler handler=new Handler()&#123;</div><div class="line">        public void handleMessage(Message msg)&#123;</div><div class="line">            switch(msg.what)&#123;</div><div class="line">                case 0x123:</div><div class="line">                    String data=msg.getData().getString(&quot;data&quot;);</div><div class="line">                    List&lt;Notes&gt; notesList=parseJsonData(data);</div><div class="line">                    NotesAdapter adapter=new NotesAdapter(handler, notesList);</div><div class="line">                    recyclerView.setAdapter(adapter);</div><div class="line">                    break;</div><div class="line">                case 0x122:</div><div class="line">                    Toast.makeText(MainActivity.this, &quot;网络出差了，稍后再试！&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">                    break;</div><div class="line">                case 0x89:</div><div class="line">                    Toast.makeText(MainActivity.this, &quot;删除成功！&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">                    initData();</div><div class="line">                    break;</div><div class="line">                case 0x88:</div><div class="line">                    Toast.makeText(MainActivity.this, &quot;删除失败！&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">                    initData();</div><div class="line">                    break;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line">        initToolbar();</div><div class="line">        text= (TextView) findViewById(R.id.text);</div><div class="line">        recyclerView= (RecyclerView) findViewById(R.id.recycler_view);</div><div class="line">        LinearLayoutManager linearLayoutManager=new LinearLayoutManager(this);</div><div class="line">        recyclerView.setLayoutManager(linearLayoutManager);</div><div class="line">        fab= (FloatingActionButton) findViewById(R.id.button_add_note);</div><div class="line">        fab.setOnClickListener(new View.OnClickListener() &#123;</div><div class="line">            @Override</div><div class="line">            public void onClick(View v) &#123;</div><div class="line">                Intent intent=new Intent(MainActivity.this,NoteActivity.class);</div><div class="line">                startActivityForResult(intent,1);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        initData();</div><div class="line">    &#125;</div><div class="line">    //新建note后，从noteActivity中获得结果并处理</div><div class="line">    @Override</div><div class="line">    protected void onActivityResult(int requestCode, int resultCode, Intent data) &#123;</div><div class="line">        if(requestCode==1)&#123;</div><div class="line">            initData();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    @Override</div><div class="line">    public boolean onCreateOptionsMenu(Menu menu) &#123;</div><div class="line">        getMenuInflater().inflate(R.menu.toolbar,menu);</div><div class="line">        return super.onCreateOptionsMenu(menu);</div><div class="line">    &#125;</div><div class="line">    //刷新按钮</div><div class="line">    @Override</div><div class="line">    public boolean onOptionsItemSelected(MenuItem item) &#123;</div><div class="line">        switch (item.getItemId())&#123;</div><div class="line">            case R.id.fresh_a:</div><div class="line">                initData();</div><div class="line">                break;</div><div class="line">            default:</div><div class="line">        &#125;</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line">    //从服务器获得数据</div><div class="line">    private void initData() &#123;</div><div class="line">        HttpUtil.sendOkHttpRequest(Constant.HTTP_JSON, new okhttp3.Callback() &#123;</div><div class="line">            @Override</div><div class="line">            public void onFailure(Call call, IOException e) &#123;</div><div class="line">                Message message=new Message();</div><div class="line">                message.what=0x122;</div><div class="line">                handler.sendMessage(message);</div><div class="line">            &#125;</div><div class="line">            @Override</div><div class="line">            public void onResponse(Call call, Response response) throws IOException &#123;</div><div class="line">                String responseData=response.body().string();</div><div class="line">                Bundle bundle=new Bundle();</div><div class="line">                bundle.putString(&quot;data&quot;,responseData);</div><div class="line">                Message message= new Message();</div><div class="line">                message.what=0x123;</div><div class="line">                message.setData(bundle);</div><div class="line">                handler.sendMessage(message);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">    //将JSON数据转换成List集合</div><div class="line">    private List&lt;Notes&gt; parseJsonData(String responseData) &#123;</div><div class="line">        Gson gson=new Gson();</div><div class="line">        List&lt;Notes&gt; notesList=gson.fromJson(responseData,new TypeToken&lt;List&lt;Notes&gt;&gt;()&#123;&#125;.getType());</div><div class="line">        return  notesList;</div><div class="line">    &#125;</div><div class="line">    //初始化toolbar</div><div class="line">    private void initToolbar() &#123;</div><div class="line">        Toolbar toolbar= (Toolbar) findViewById(R.id.toolbar);</div><div class="line">        setSupportActionBar(toolbar);</div><div class="line">        setTitle(&quot;Notes&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="NotesActivity的业务逻辑"><a href="#NotesActivity的业务逻辑" class="headerlink" title="NotesActivity的业务逻辑"></a>NotesActivity的业务逻辑</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line">public class NoteActivity extends AppCompatActivity&#123;</div><div class="line"></div><div class="line">    private Handler handler=new Handler()&#123;</div><div class="line">      public void handleMessage(Message msg)&#123;</div><div class="line">          switch (msg.what)&#123;</div><div class="line">              case 0x222:</div><div class="line">                  Toast.makeText(NoteActivity.this, &quot;添加成功！！&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">                  Intent intent =new Intent();</div><div class="line">                  setResult(1,intent);</div><div class="line">                  finish();</div><div class="line">                  break;</div><div class="line">              case 0x221:</div><div class="line">                  Toast.makeText(NoteActivity.this, &quot;网络出错了&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">                  break;</div><div class="line">          &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">    private Toolbar mToolbar;</div><div class="line">    private EditText mEtNoteContent;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.note);</div><div class="line">        mEtNoteContent = (EditText) findViewById(R.id.et_note_content);</div><div class="line">        initToolbar();</div><div class="line">    &#125;</div><div class="line">    @Override</div><div class="line">    public boolean onCreateOptionsMenu(Menu menu) &#123;</div><div class="line">        getMenuInflater().inflate(R.menu.menu_main, menu);</div><div class="line">        return super.onCreateOptionsMenu(menu);</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * 初始化toolbar</div><div class="line">     */</div><div class="line">    private void initToolbar() &#123;</div><div class="line">        mToolbar = (Toolbar) findViewById(R.id.toolbar_note_content);</div><div class="line">        setSupportActionBar(mToolbar);</div><div class="line">        getSupportActionBar().setDisplayHomeAsUpEnabled(true);</div><div class="line">        mToolbar.setNavigationOnClickListener(new View.OnClickListener() &#123;</div><div class="line">            @Override</div><div class="line">            public void onClick(View v) &#123;</div><div class="line">                finish();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">    @Override</div><div class="line">    public boolean onOptionsItemSelected(MenuItem item) &#123;</div><div class="line">        switch (item.getItemId()) &#123;</div><div class="line">            case R.id.save:</div><div class="line">                String content=mEtNoteContent.getText().toString();</div><div class="line">                if (TextUtils.isEmpty(content))&#123;</div><div class="line">                    Toast.makeText(NoteActivity.this, &quot;无数据输入！&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">                    break;</div><div class="line">                &#125;else&#123;</div><div class="line">                    String url= Constant.HTTP_ADDNOTES+content;</div><div class="line">                    HttpUtil.sendOkHttpRequest(url, new okhttp3.Callback() &#123;</div><div class="line">                        @Override</div><div class="line">                        public void onFailure(Call call, IOException e) &#123;</div><div class="line">                            Message msg=new Message();</div><div class="line">                            msg.what=0x221;</div><div class="line">                            handler.sendMessage(msg);</div><div class="line">                        &#125;</div><div class="line">                        @Override</div><div class="line">                        public void onResponse(Call call, Response response) throws IOException &#123;</div><div class="line">                            Message msg=new Message();</div><div class="line">                            msg.what=0x222;</div><div class="line">                            handler.sendMessage(msg);</div><div class="line">                        &#125;</div><div class="line">                    &#125;);</div><div class="line">                &#125;</div><div class="line">            default:</div><div class="line">                break;</div><div class="line">                &#125;</div><div class="line">        return  super.onOptionsItemSelected(item);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="问题备忘"><a href="#问题备忘" class="headerlink" title="问题备忘"></a>问题备忘</h2><h3 id="Adapter中button事件更新主UI问题"><a href="#Adapter中button事件更新主UI问题" class="headerlink" title="Adapter中button事件更新主UI问题"></a>Adapter中button事件更新主UI问题</h3><p>&emsp;&emsp;在NotesAdapter中，每一个Holder里面拥有一个删除按钮，触发后删除该note并且通知主UI更新界面，所以在Adapter的构造函数中，传入主线程的handler，可以解决问题。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;emsp;&amp;emsp;主页搭建完成后，我们将实现移动端的Note。总的来说，web端搭建成功后。这个note还是比较简单的。&lt;br&gt;
    
    </summary>
    
      <category term="Android" scheme="https://teleporter.top/categories/Android/"/>
    
    
      <category term="AS" scheme="https://teleporter.top/tags/AS/"/>
    
      <category term="Okhttp" scheme="https://teleporter.top/tags/Okhttp/"/>
    
      <category term="Notes" scheme="https://teleporter.top/tags/Notes/"/>
    
  </entry>
  
  <entry>
    <title>从零开始搭建个人主页</title>
    <link href="https://teleporter.top/2017/04/27/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%B8%BB%E9%A1%B5/"/>
    <id>https://teleporter.top/2017/04/27/从零开始搭建个人主页/</id>
    <published>2017-04-27T13:41:20.000Z</published>
    <updated>2017-05-03T14:59:37.176Z</updated>
    
    <content type="html"><![CDATA[<p>&emsp;&emsp;<font size="4px" color="red">域名还在审核，网站暂时无法访问(xiaosadelai.top)</font><br>&emsp;&emsp;学完了SpringMVC+MyBatis框架，学以致用，就决定自己搭建一个个人导航主页。一方面：360主页内容繁琐，大部分用不到并且广告众多；另一方面搭建自己的网站可以实现一些便利功能，并且利于APP测试。<br><a id="more"></a></p>
<h2 id="前端制作"><a href="#前端制作" class="headerlink" title="前端制作"></a>前端制作</h2><p>&emsp;&emsp;前端用WebStorm写，DIV+CSS布局，难度不大。主要有几块内容：搜索条，常用网站快速导航，一个便签功能，方便随时记录一些待办事项。<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/Re/R1.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<h3 id="百度搜索导航条"><a href="#百度搜索导航条" class="headerlink" title="百度搜索导航条"></a>百度搜索导航条</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;form id=&quot;form&quot; action=&quot;http://www.baidu.com/baidu&quot; target=&quot;_blank&quot;&gt;</div><div class="line">            &lt;input name=&quot;tn&quot; type=&quot;hidden&quot; value=&quot;baidu&quot;&gt;</div><div class="line">            &lt;input type=&quot;text&quot; placeholder=&quot;From Zero to One...&quot; class=&quot;input_text&quot; name=&quot;word&quot;/&gt;</div><div class="line">            &lt;input type=&quot;submit&quot; class=&quot;input_button&quot; value=&quot;&quot;/&gt;</div><div class="line">        &lt;/form&gt;</div></pre></td></tr></table></figure>
<h3 id="图片相关的网站"><a href="#图片相关的网站" class="headerlink" title="图片相关的网站"></a>图片相关的网站</h3><ol>
<li><a href="http://www.msqq.com/appicon.html" target="_blank" rel="external">图标制作网站</a></li>
<li><a href="http://www.tuhaokuai.com/image" target="_blank" rel="external">图片压缩网站</a></li>
<li><a href="http://588ku.com/banner/" target="_blank" rel="external">背景图片网站</a></li>
</ol>
<h2 id="后端搭建"><a href="#后端搭建" class="headerlink" title="后端搭建"></a>后端搭建</h2><h3 id="用maven进行库管理"><a href="#用maven进行库管理" class="headerlink" title="用maven进行库管理"></a>用maven进行库管理</h3><p>&emsp;&emsp;Eclipse 生成maven-webapp,将静态网站存储在web项目中，并在pom.xml添加所依赖的库及对MySQL的支持<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;properties&gt;</div><div class="line">        &lt;springside.version&gt;4.2.2.GA&lt;/springside.version&gt;</div><div class="line">        &lt;spring.version&gt;4.0.5.RELEASE&lt;/spring.version&gt;</div><div class="line">        &lt;mybatis.version&gt;3.2.5&lt;/mybatis.version&gt;</div><div class="line">        &lt;mybatis-spring.version&gt;1.2.2&lt;/mybatis-spring.version&gt;</div><div class="line">        &lt;logback.version&gt;1.1.1&lt;/logback.version&gt;</div><div class="line">        &lt;tomcat-jdbc.version&gt;7.0.52&lt;/tomcat-jdbc.version&gt;</div><div class="line">        &lt;jackson.version&gt;2.3.1&lt;/jackson.version&gt;</div><div class="line">        &lt;!-- Plugin的属性定义 --&gt;</div><div class="line">        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</div><div class="line">        &lt;java.version&gt;1.7&lt;/java.version&gt;</div><div class="line">        &lt;jdbc.driver.groupId&gt;mysql&lt;/jdbc.driver.groupId&gt;</div><div class="line">        &lt;jdbc.driver.artifactId&gt;mysql-connector-java&lt;/jdbc.driver.artifactId&gt;</div><div class="line">        &lt;jdbc.driver.version&gt;5.1.22&lt;/jdbc.driver.version&gt;</div><div class="line">    &lt;/properties&gt;</div></pre></td></tr></table></figure></p>
<h3 id="配置web-xml"><a href="#配置web-xml" class="headerlink" title="配置web.xml"></a>配置web.xml</h3><p>&emsp;&emsp;拦截.html结尾的Request。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">&lt;!-- spring框架必须定义ContextLoaderListener，在启动Web容器时，自动装配Spring applicationContext.xml的配置信息 --&gt;</div><div class="line"> &lt;listener&gt;</div><div class="line">   &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;</div><div class="line"> &lt;/listener&gt;</div><div class="line"></div><div class="line"> &lt;context-param&gt;</div><div class="line"> 	&lt;!-- 指定Spring上下文配置文件 --&gt;</div><div class="line">   &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</div><div class="line">   &lt;param-value&gt;classpath*:applicationContext.xml&lt;/param-value&gt;</div><div class="line"> &lt;/context-param&gt;</div><div class="line"> &lt;context-param&gt;</div><div class="line">   &lt;param-name&gt;spring.profiles.active&lt;/param-name&gt;</div><div class="line">   &lt;param-value&gt;production&lt;/param-value&gt;</div><div class="line"> &lt;/context-param&gt;</div><div class="line"></div><div class="line"> &lt;servlet&gt;</div><div class="line">   &lt;servlet-name&gt;Dispatcher&lt;/servlet-name&gt;</div><div class="line">   &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</div><div class="line">   &lt;init-param&gt;</div><div class="line">     &lt;!-- 指定SpringMVC配置文件 --&gt;</div><div class="line">     &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</div><div class="line">     &lt;param-value&gt;/WEB-INF/springmvc.xml&lt;/param-value&gt;</div><div class="line">   &lt;/init-param&gt;</div><div class="line"> &lt;/servlet&gt;</div><div class="line"> </div><div class="line"> &lt;servlet-mapping&gt;</div><div class="line"> 	  &lt;!-- 指定请求的后缀，可以随意写，这里用.html作为请求后缀 --&gt;</div><div class="line">   &lt;servlet-name&gt;Dispatcher&lt;/servlet-name&gt;</div><div class="line">   &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;</div><div class="line"> &lt;/servlet-mapping&gt;</div></pre></td></tr></table></figure></p>
<h3 id="配置springmvc-xml"><a href="#配置springmvc-xml" class="headerlink" title="配置springmvc.xml"></a>配置springmvc.xml</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;!-- spring可以自动去扫描base-package下面或者子包下面的java文件，</div><div class="line">如果扫描到有@Component @Controller @Service @Repository等这些注解的类，则把这些类注册为bean --&gt;</div><div class="line">    &lt;context:component-scan base-package=&quot;com.pansaian.*&quot; /&gt;</div><div class="line">    &lt;!-- 模型解析，在请求时为模型视图名称添加前后缀 </div><div class="line">    比如在controller类中需要请求/WEB-INF/page/index.jsp文件，直接写index就可以了--&gt;</div><div class="line">    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot; p:prefix=&quot;/WEB-INF/page/&quot; p:suffix=&quot;.jsp&quot; /&gt;</div></pre></td></tr></table></figure>
<h3 id="编写实体类"><a href="#编写实体类" class="headerlink" title="编写实体类"></a>编写实体类</h3><p>&emsp;&emsp;在这里，删除note并不是真的在数据库中删除这条数据，而是指定一个status,值为1表示可用，值为0表示已删除<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">public class Notes &#123;</div><div class="line">	private int id;</div><div class="line">	private String content;</div><div class="line">	private Date time;</div><div class="line">	private int status;</div><div class="line">	public int getId() &#123;</div><div class="line">		return id;</div><div class="line">	&#125;</div><div class="line">	public void setId(int id) &#123;</div><div class="line">		this.id = id;</div><div class="line">	&#125;</div><div class="line">	public String getContent() &#123;</div><div class="line">		return content;</div><div class="line">	&#125;</div><div class="line">	public void setContent(String content) &#123;</div><div class="line">		this.content = content;</div><div class="line">	&#125;</div><div class="line">	public Date getTime() &#123;</div><div class="line">		return time;</div><div class="line">	&#125;</div><div class="line">	public void setTime(Date time) &#123;</div><div class="line">		this.time = time;</div><div class="line">	&#125;</div><div class="line">	public int getStatus() &#123;</div><div class="line">		return status;</div><div class="line">	&#125;</div><div class="line">	public void setStatus(int status) &#123;</div><div class="line">		this.status = status;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="编写Controller"><a href="#编写Controller" class="headerlink" title="编写Controller"></a>编写Controller</h3><p>&emsp;&emsp;Controller主要控制将请求发往哪个Service，并处理service的结果并返还给浏览器。在这里，我们要实现note的查询，删除，新建功能。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line">@Controller</div><div class="line">public class IndexController &#123;</div><div class="line">	@Resource</div><div class="line">	NotesService service;</div><div class="line">	</div><div class="line">	//查询notes</div><div class="line">	@RequestMapping(value = &quot;index&quot;)</div><div class="line">	public String helloWorld(HttpServletRequest request)&#123;</div><div class="line">		int notesCount = service.getNotesCount();</div><div class="line">		PageParam pageParam = new PageParam();</div><div class="line">		pageParam.setNotesCount(notesCount);</div><div class="line">		pageParam = service.getPageParm(pageParam);</div><div class="line">		</div><div class="line">		//content长度进行限制</div><div class="line">		List&lt;Notes&gt; mList=pageParam.getData();</div><div class="line">		for(Notes item:mList)&#123;</div><div class="line">			if (item.getContent().length()&gt;15)&#123;</div><div class="line">				item.setContent(item.getContent().substring(0,14)+&quot;...&quot;);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		pageParam.setData(mList);</div><div class="line">		request.setAttribute(&quot;pageParam&quot;, pageParam);</div><div class="line">		return &quot;index&quot;;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	//删除notes</div><div class="line">	@RequestMapping(value=&quot;cancel&quot;)</div><div class="line">	public void cancel(HttpServletRequest request, HttpServletResponse response) throws IOException&#123;</div><div class="line">		int id=Integer.valueOf(request.getParameter(&quot;id&quot;));</div><div class="line">		System.out.println(id);</div><div class="line">		service.cancel(id);</div><div class="line">		response.sendRedirect(&quot;index.html&quot;);</div><div class="line">	&#125;</div><div class="line">	//APP删除notes</div><div class="line">	@RequestMapping(value=&quot;cancelApp&quot;)</div><div class="line">	public void cancelApp(HttpServletRequest request, HttpServletResponse response) throws IOException&#123;</div><div class="line">		int id=Integer.valueOf(request.getParameter(&quot;id&quot;));</div><div class="line">		System.out.println(id);</div><div class="line">		service.cancel(id);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	//增加notes</div><div class="line">	@RequestMapping(value=&quot;add&quot;)</div><div class="line">		public String addNotes()&#123;</div><div class="line">		return &quot;add&quot;; </div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	@RequestMapping(value=&quot;addNotes&quot;)</div><div class="line">		public void addOne(HttpServletRequest request,HttpServletResponse response) throws IOException&#123;</div><div class="line">		String content=request.getParameter(&quot;content&quot;);</div><div class="line">		Notes notes=new Notes();</div><div class="line">		notes.setContent(content);</div><div class="line">		notes.setTime(new Date());</div><div class="line">		notes.setStatus(1);</div><div class="line">		service.addNotes(notes);</div><div class="line">	&#125;</div><div class="line">	//App返回json类型的数据</div><div class="line">	@RequestMapping(value=&quot;json&quot;)</div><div class="line">		public String jsontest(HttpServletRequest request)&#123;</div><div class="line">		int notesCount = service.getNotesCount();</div><div class="line">		PageParam pageParam = new PageParam();</div><div class="line">		pageParam.setNotesCount(notesCount);</div><div class="line">		pageParam = service.getPageParm(pageParam);</div><div class="line">		</div><div class="line">		//将数据生成json格式</div><div class="line">		JSONArray jsonArray=new JSONArray();</div><div class="line">		SimpleDateFormat format;</div><div class="line">		format =new SimpleDateFormat(&quot;yyyy年MM月dd日  HH:mm:ss&quot;);</div><div class="line">		for (int i=0;i&lt;notesCount;i++)&#123;</div><div class="line">			JSONObject object= new JSONObject();</div><div class="line">			object.put(&quot;id&quot;, pageParam.getData().get(i).getId());</div><div class="line">			object.put(&quot;content&quot;, pageParam.getData().get(i).getContent());</div><div class="line">			object.put(&quot;time&quot;, format.format(pageParam.getData().get(i).getTime()));</div><div class="line">			object.put(&quot;status&quot;, pageParam.getData().get(i).getStatus());</div><div class="line">			jsonArray.add(object);</div><div class="line">		&#125;</div><div class="line">		request.setAttribute(&quot;result&quot;,jsonArray.toString());</div><div class="line">		return &quot;json&quot;;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="编写Service"><a href="#编写Service" class="headerlink" title="编写Service"></a>编写Service</h3><p>&emsp;&emsp;Service通知DAO层进行数据处理<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">@Resource</div><div class="line">	NotesDao dao ;</div><div class="line">	//获取note总数量</div><div class="line">	public int getNotesCount() &#123;</div><div class="line">		return dao.getNotesCount();</div><div class="line">	&#125;</div><div class="line">	//获取满足条件的note</div><div class="line">	public PageParam getPageParm(PageParam pageParam) &#123;</div><div class="line">		List&lt;Notes&gt; notesList = dao.getNotes();</div><div class="line">		pageParam.setData(notesList);</div><div class="line">		return pageParam;</div><div class="line">	&#125;</div><div class="line">	//删除note</div><div class="line">	public void cancel(int id) &#123;</div><div class="line">		 dao.cancel(id);</div><div class="line">	&#125;</div><div class="line">	//添加note</div><div class="line">	public void addNotes(Notes notes) &#123;</div><div class="line">		System.out.println(&quot;添加一条note&quot;);</div><div class="line">		dao.addNotes(notes);</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<h3 id="配置applicationContext-xml"><a href="#配置applicationContext-xml" class="headerlink" title="配置applicationContext.xml"></a>配置applicationContext.xml</h3><p>&emsp;&emsp;MyBatis的配置设置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">&lt;!-- MyBatis配置 --&gt;</div><div class="line">    &lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;</div><div class="line">        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;</div><div class="line">        &lt;!-- 显式指定Mapper文件位置 --&gt;</div><div class="line">		&lt;property name=&quot;mapperLocations&quot; value=&quot;classpath*:/mybatis/*Mapper.xml&quot; /&gt;</div><div class="line">		&lt;!-- mybatis配置文件路径 --&gt;</div><div class="line">        &lt;property name=&quot;configLocation&quot; value=&quot;classpath:/mybatis/config.xml&quot;/&gt;    </div><div class="line">    &lt;/bean&gt;</div><div class="line">    &lt;bean id=&quot;sqlSessionTemplate&quot; class=&quot;org.mybatis.spring.SqlSessionTemplate&quot;&gt;</div><div class="line">       &lt;constructor-arg index=&quot;0&quot; ref=&quot;sqlSessionFactory&quot; /&gt;</div><div class="line">       &lt;!-- 这个执行器会批量执行更新语句, 还有SIMPLE 和 REUSE --&gt;</div><div class="line">       &lt;constructor-arg index=&quot;1&quot; value=&quot;BATCH&quot; /&gt;</div><div class="line">    &lt;/bean&gt;</div><div class="line">    &lt;!-- 扫描basePackage接口 --&gt;</div><div class="line">    &lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;</div><div class="line">    	&lt;!-- 映射器接口文件的包路径， --&gt;</div><div class="line">        &lt;property name=&quot;basePackage&quot; value=&quot;com.pansaian.myweb.dao&quot; /&gt;</div><div class="line">    &lt;/bean&gt;</div><div class="line">    &lt;!-- 使用annotation定义事务 --&gt;</div><div class="line">    &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;</div><div class="line">        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</div><div class="line">    &lt;/bean&gt;</div><div class="line">    &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; proxy-target-class=&quot;true&quot; /&gt;</div><div class="line">    &lt;!-- 数据源配置, 使用Tomcat JDBC连接池 --&gt;</div><div class="line">    &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.tomcat.jdbc.pool.DataSource&quot; destroy-method=&quot;close&quot;&gt;</div><div class="line">        &lt;!-- Connection Info --&gt;</div><div class="line">        &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;jdbc.driver&#125;&quot; /&gt;</div><div class="line">        &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot; /&gt;</div><div class="line">        &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot; /&gt;</div><div class="line">        &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot; /&gt;</div><div class="line"></div><div class="line">        &lt;!-- Connection Pooling Info --&gt;</div><div class="line">        &lt;property name=&quot;maxActive&quot; value=&quot;$&#123;jdbc.pool.maxActive&#125;&quot; /&gt;</div><div class="line">        &lt;property name=&quot;maxIdle&quot; value=&quot;$&#123;jdbc.pool.maxIdle&#125;&quot; /&gt;</div><div class="line">        &lt;property name=&quot;minIdle&quot; value=&quot;0&quot; /&gt;</div><div class="line">        &lt;property name=&quot;defaultAutoCommit&quot; value=&quot;false&quot; /&gt;</div><div class="line">    &lt;/bean&gt;</div><div class="line">    &lt;!-- production环境 --&gt;</div><div class="line">    &lt;beans profile=&quot;production&quot;&gt;</div><div class="line">        &lt;context:property-placeholder ignore-unresolvable=&quot;true&quot; file-encoding=&quot;utf-8&quot; </div><div class="line">        location=&quot;classpath:config.properties,classpath:jdbc.properties&quot; /&gt;</div><div class="line">    &lt;/beans&gt;</div></pre></td></tr></table></figure></p>
<h3 id="编写DAO层"><a href="#编写DAO层" class="headerlink" title="编写DAO层"></a>编写DAO层</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@Repository</div><div class="line">public interface NotesDao &#123;</div><div class="line">	int getNotesCount();</div><div class="line">	List&lt;Notes&gt;  getNotes();</div><div class="line">	void cancel(int id);</div><div class="line">	void addNotes(Notes notes);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="编写Mapper文件"><a href="#编写Mapper文件" class="headerlink" title="编写Mapper文件"></a>编写Mapper文件</h3><p>&emsp;&emsp;虽然Mapper文件可以用Java来写，但是Mapper的初衷就是希望SQL不要侵入到Java语言中，所以用配置文件来写Mapper<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;mapper namespace=&quot;com.pansaian.myweb.dao.NotesDao&quot;&gt;</div><div class="line">	&lt;!--获得note数量  --&gt;</div><div class="line">	&lt;select id=&quot;getNotesCount&quot; resultType=&quot;int&quot;&gt;</div><div class="line">		select count(*) from notes where status=1</div><div class="line">	&lt;/select&gt;</div><div class="line">	&lt;!--获得note，并且按时间排序  --&gt;</div><div class="line">	&lt;select id=&quot;getNotes&quot; resultType=&quot;com.pansaian.myweb.entity.Notes&quot; &gt;</div><div class="line">		select * from notes  where status=1</div><div class="line">		order by time desc</div><div class="line">	&lt;/select&gt;</div><div class="line">	&lt;!--删除指定ID的note  --&gt;</div><div class="line">	&lt;update id=&quot;cancel&quot; parameterType=&quot;int&quot; &gt;</div><div class="line">		update notes set status=0 where id=#&#123;id&#125;</div><div class="line">	&lt;/update&gt;</div><div class="line">	&lt;!--添加一条note  --&gt;</div><div class="line">	&lt;insert id=&quot;addNotes&quot; parameterType=&quot;com.pansaian.myweb.entity.Notes&quot;&gt;</div><div class="line">		insert into notes(content,time,status) values(#&#123;content&#125;,#&#123;time&#125;,#&#123;status&#125;)</div><div class="line">	&lt;/insert&gt;</div><div class="line">&lt;/mapper&gt;</div></pre></td></tr></table></figure></p>
<h2 id="其他问题备注"><a href="#其他问题备注" class="headerlink" title="其他问题备注"></a>其他问题备注</h2><h3 id="note输出到JSP页面"><a href="#note输出到JSP页面" class="headerlink" title="note输出到JSP页面"></a>note输出到JSP页面</h3><p>&emsp;&emsp; 这里我们用 c:foreach 标签循环输出note，日期用 fmt:formatDate 标签进行格式化<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">c:forEach items=&quot;$&#123;pageParam.data &#125;&quot; var=&quot;item&quot; varStatus=&quot;status&quot;&gt; </div><div class="line">	&lt;li&gt;</div><div class="line">		&lt;div class=&quot;note&quot;&gt;</div><div class="line">            &lt;em&gt;$&#123;status.count &#125;&lt;/em&gt;</div><div class="line">            &lt;h3&gt;$&#123;item.content &#125;&lt;/h3&gt;</div><div class="line">            &lt;span&gt;&lt;fmt:formatDate pattern=&quot;MM-dd&quot; value=&quot;$&#123;item.time&#125;&quot; /&gt;&lt;/span&gt;</div><div class="line">            &lt;a href=&quot;cancel.html?id=$&#123;item.id &#125;&quot;&gt;&lt;/a&gt;</div><div class="line">		&lt;/div&gt;</div><div class="line">	&lt;/li&gt;</div><div class="line">&lt;/c:forEach&gt;</div></pre></td></tr></table></figure></p>
<h3 id="添加新note后窗体关闭问题及页面刷新问题"><a href="#添加新note后窗体关闭问题及页面刷新问题" class="headerlink" title="添加新note后窗体关闭问题及页面刷新问题"></a>添加新note后窗体关闭问题及页面刷新问题</h3><p>&emsp;&emsp;这个问题暂时没有我还没想到好的解决办法，在以后版本中解决<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;form class=&quot;form&quot; action=&quot;addNotes.html&quot;&gt;</div><div class="line">			&lt;textarea class=&quot;content&quot; name=&quot;content&quot;&gt;&lt;/textarea&gt;</div><div class="line">			&lt;script&gt;</div><div class="line">			 	document.getElementById(&quot;isubmit&quot;).onclick=function()&#123;</div><div class="line">					window.close();</div><div class="line">			 	&#125;</div><div class="line">			&lt;/script&gt;</div><div class="line">			&lt;input class=&quot;ibutton&quot; type=&quot;submit&quot; value=&quot;添加&quot; id=&quot;isubmit&quot;/&gt;</div><div class="line"> 		&lt;/form&gt;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;emsp;&amp;emsp;&lt;font size=&quot;4px&quot; color=&quot;red&quot;&gt;域名还在审核，网站暂时无法访问(xiaosadelai.top)&lt;/font&gt;&lt;br&gt;&amp;emsp;&amp;emsp;学完了SpringMVC+MyBatis框架，学以致用，就决定自己搭建一个个人导航主页。一方面：360主页内容繁琐，大部分用不到并且广告众多；另一方面搭建自己的网站可以实现一些便利功能，并且利于APP测试。&lt;br&gt;
    
    </summary>
    
      <category term="JavaWeb" scheme="https://teleporter.top/categories/JavaWeb/"/>
    
    
      <category term="Web" scheme="https://teleporter.top/tags/Web/"/>
    
      <category term="SpringMVC" scheme="https://teleporter.top/tags/SpringMVC/"/>
    
      <category term="Mybatis" scheme="https://teleporter.top/tags/Mybatis/"/>
    
  </entry>
  
  <entry>
    <title>AS设置及问题汇总（不定期更新）</title>
    <link href="https://teleporter.top/2017/04/25/AS%E8%AE%BE%E7%BD%AE%E5%8F%8A%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB%EF%BC%88%E4%B8%8D%E5%AE%9A%E6%9C%9F%E6%9B%B4%E6%96%B0%EF%BC%89/"/>
    <id>https://teleporter.top/2017/04/25/AS设置及问题汇总（不定期更新）/</id>
    <published>2017-04-25T13:41:37.000Z</published>
    <updated>2017-04-25T14:13:18.914Z</updated>
    
    <content type="html"><![CDATA[<p>&emsp;&emsp;Android Studio的软件设置及问题汇总，长期更新。<br><a id="more"></a></p>
<h2 id="软件设置"><a href="#软件设置" class="headerlink" title="软件设置"></a>软件设置</h2><h3 id="初始设置，界面与字体。"><a href="#初始设置，界面与字体。" class="headerlink" title="初始设置，界面与字体。"></a>初始设置，界面与字体。</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/AS_style.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/AS_foot.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<h3 id="设置自动导包"><a href="#设置自动导包" class="headerlink" title="设置自动导包"></a>设置自动导包</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/AS自动导包.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<h2 id="问题汇总"><a href="#问题汇总" class="headerlink" title="问题汇总"></a>问题汇总</h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;emsp;&amp;emsp;Android Studio的软件设置及问题汇总，长期更新。&lt;br&gt;
    
    </summary>
    
      <category term="Software" scheme="https://teleporter.top/categories/Software/"/>
    
    
      <category term="AS" scheme="https://teleporter.top/tags/AS/"/>
    
      <category term="Settings" scheme="https://teleporter.top/tags/Settings/"/>
    
  </entry>
  
  <entry>
    <title>使用Hexo+Github搭建个人博客</title>
    <link href="https://teleporter.top/2017/04/16/%E4%BD%BF%E7%94%A8Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    <id>https://teleporter.top/2017/04/16/使用Hexo-Github搭建个人博客/</id>
    <published>2017-04-16T13:41:59.000Z</published>
    <updated>2017-04-18T01:15:22.296Z</updated>
    
    <content type="html"><![CDATA[<p>&emsp;&emsp;Hexo是一个简单、快速、强大的基于 Github Pages的博客发布工具，支持Markdown格式，有众多优秀插件和主题。<br><a id="more"></a></p>
<h3 id="问题汇总"><a href="#问题汇总" class="headerlink" title="问题汇总"></a>问题汇总</h3><ul>
<li><font size="4" color="blue">indigo主题无法从github上Clone下来</font>

</li>
</ul>
<p>&emsp;&emsp;SSH key没有在GitHub上正确配置，配置完后测试是否成功</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ssh -T git@git@github.com</div></pre></td></tr></table></figure>
<ul>
<li><font size="4" color="blue">域名解析，无法访问到github</font>

</li>
</ul>
<p>&emsp;&emsp;需要在GitHub中添加CNAME文件，如图。<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/cname.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://wensibo.top/categories/一口一口吃掉Hexo/" target="_blank" rel="external"><em><font size="2" color="#FF4081">Hexo+Github搭建教程</font></em></a></li>
<li><a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank" rel="external"><em><font size="2" color="#FF4081">Indigo主题配置</font></em></a></li>
<li><a href="http://www.appinn.com/markdown/#philosophy" target="_blank" rel="external"><em><font size="2" color="#FF4081">markdown官方文档</font></em></a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;emsp;&amp;emsp;Hexo是一个简单、快速、强大的基于 Github Pages的博客发布工具，支持Markdown格式，有众多优秀插件和主题。&lt;br&gt;
    
    </summary>
    
      <category term="other" scheme="https://teleporter.top/categories/other/"/>
    
    
      <category term="hexo" scheme="https://teleporter.top/tags/hexo/"/>
    
      <category term="github" scheme="https://teleporter.top/tags/github/"/>
    
      <category term="阿里云" scheme="https://teleporter.top/tags/%E9%98%BF%E9%87%8C%E4%BA%91/"/>
    
  </entry>
  
</feed>
