{"meta":{"title":"Teleporter","subtitle":"如果没能一次成功，那就叫它1.0版吧","description":"Java Android CSS PC","author":"潇洒的来","url":"https://teleporter.top"},"pages":[{"title":"","date":"2017-04-18T00:38:32.672Z","updated":"2017-04-17T14:21:33.091Z","comments":true,"path":"404.html","permalink":"https://teleporter.top/404.html","excerpt":"","text":"layout: false title: \"Teleporter | 404 Not Found\""},{"title":"","date":"2017-04-16T14:05:31.370Z","updated":"2017-04-16T14:05:31.368Z","comments":false,"path":"categories/index.html","permalink":"https://teleporter.top/categories/index.html","excerpt":"","text":""},{"title":"","date":"2017-04-16T04:27:54.381Z","updated":"2017-04-16T04:27:54.381Z","comments":false,"path":"tags/index.html","permalink":"https://teleporter.top/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"从零开始搭建个人主页","slug":"从零开始搭建个人主页","date":"2017-04-27T13:41:20.000Z","updated":"2017-05-03T14:55:39.747Z","comments":true,"path":"2017/04/27/从零开始搭建个人主页/","link":"","permalink":"https://teleporter.top/2017/04/27/从零开始搭建个人主页/","excerpt":"&emsp;&emsp;域名还在审核，网站暂时无法访问(xiaosadelai.top)&emsp;&emsp;学完了SpringMVC+MyBatis框架，学以致用，就决定自己搭建一个个人导航主页。一方面：360主页内容繁琐，大部分用不到并且广告众多；另一方面搭建自己的网站可以实现一些便利功能，并且利于APP测试。","text":"&emsp;&emsp;域名还在审核，网站暂时无法访问(xiaosadelai.top)&emsp;&emsp;学完了SpringMVC+MyBatis框架，学以致用，就决定自己搭建一个个人导航主页。一方面：360主页内容繁琐，大部分用不到并且广告众多；另一方面搭建自己的网站可以实现一些便利功能，并且利于APP测试。 前端制作&emsp;&emsp;前端用WebStorm写，DIV+CSS布局，难度不大。主要有几块内容：搜索条，常用网站快速导航，一个便签功能，方便随时记录一些待办事项。 百度搜索导航条12345&lt;form id=&quot;form&quot; action=&quot;http://www.baidu.com/baidu&quot; target=&quot;_blank&quot;&gt; &lt;input name=&quot;tn&quot; type=&quot;hidden&quot; value=&quot;baidu&quot;&gt; &lt;input type=&quot;text&quot; placeholder=&quot;From Zero to One...&quot; class=&quot;input_text&quot; name=&quot;word&quot;/&gt; &lt;input type=&quot;submit&quot; class=&quot;input_button&quot; value=&quot;&quot;/&gt; &lt;/form&gt; 图片相关的网站 图标制作网站 图片压缩网站 背景图片网站 后端搭建用maven进行库管理&emsp;&emsp;Eclipse 生成maven-webapp,将静态网站存储在web项目中，并在pom.xml添加所依赖的库及对MySQL的支持123456789101112131415&lt;properties&gt; &lt;springside.version&gt;4.2.2.GA&lt;/springside.version&gt; &lt;spring.version&gt;4.0.5.RELEASE&lt;/spring.version&gt; &lt;mybatis.version&gt;3.2.5&lt;/mybatis.version&gt; &lt;mybatis-spring.version&gt;1.2.2&lt;/mybatis-spring.version&gt; &lt;logback.version&gt;1.1.1&lt;/logback.version&gt; &lt;tomcat-jdbc.version&gt;7.0.52&lt;/tomcat-jdbc.version&gt; &lt;jackson.version&gt;2.3.1&lt;/jackson.version&gt; &lt;!-- Plugin的属性定义 --&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;java.version&gt;1.7&lt;/java.version&gt; &lt;jdbc.driver.groupId&gt;mysql&lt;/jdbc.driver.groupId&gt; &lt;jdbc.driver.artifactId&gt;mysql-connector-java&lt;/jdbc.driver.artifactId&gt; &lt;jdbc.driver.version&gt;5.1.22&lt;/jdbc.driver.version&gt; &lt;/properties&gt; 配置web.xml&emsp;&emsp;拦截.html结尾的Request。123456789101112131415161718192021222324252627282930&lt;!-- spring框架必须定义ContextLoaderListener，在启动Web容器时，自动装配Spring applicationContext.xml的配置信息 --&gt; &lt;listener&gt; &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt; &lt;/listener&gt; &lt;context-param&gt; &lt;!-- 指定Spring上下文配置文件 --&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath*:applicationContext.xml&lt;/param-value&gt; &lt;/context-param&gt; &lt;context-param&gt; &lt;param-name&gt;spring.profiles.active&lt;/param-name&gt; &lt;param-value&gt;production&lt;/param-value&gt; &lt;/context-param&gt; &lt;servlet&gt; &lt;servlet-name&gt;Dispatcher&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;!-- 指定SpringMVC配置文件 --&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;/WEB-INF/springmvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;!-- 指定请求的后缀，可以随意写，这里用.html作为请求后缀 --&gt; &lt;servlet-name&gt;Dispatcher&lt;/servlet-name&gt; &lt;url-pattern&gt;*.html&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; 配置springmvc.xml123456&lt;!-- spring可以自动去扫描base-package下面或者子包下面的java文件，如果扫描到有@Component @Controller @Service @Repository等这些注解的类，则把这些类注册为bean --&gt; &lt;context:component-scan base-package=&quot;com.pansaian.*&quot; /&gt; &lt;!-- 模型解析，在请求时为模型视图名称添加前后缀 比如在controller类中需要请求/WEB-INF/page/index.jsp文件，直接写index就可以了--&gt; &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot; p:prefix=&quot;/WEB-INF/page/&quot; p:suffix=&quot;.jsp&quot; /&gt; 编写实体类&emsp;&emsp;在这里，删除note并不是真的在数据库中删除这条数据，而是指定一个status,值为1表示可用，值为0表示已删除123456789101112131415161718192021222324252627282930public class Notes &#123; private int id; private String content; private Date time; private int status; public int getId() &#123; return id; &#125; public void setId(int id) &#123; this.id = id; &#125; public String getContent() &#123; return content; &#125; public void setContent(String content) &#123; this.content = content; &#125; public Date getTime() &#123; return time; &#125; public void setTime(Date time) &#123; this.time = time; &#125; public int getStatus() &#123; return status; &#125; public void setStatus(int status) &#123; this.status = status; &#125;&#125; 编写Controller&emsp;&emsp;Controller主要控制将请求发往哪个Service，并处理service的结果并返还给浏览器。在这里，我们要实现note的查询，删除，新建功能。1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980@Controllerpublic class IndexController &#123; @Resource NotesService service; //查询notes @RequestMapping(value = &quot;index&quot;) public String helloWorld(HttpServletRequest request)&#123; int notesCount = service.getNotesCount(); PageParam pageParam = new PageParam(); pageParam.setNotesCount(notesCount); pageParam = service.getPageParm(pageParam); //content长度进行限制 List&lt;Notes&gt; mList=pageParam.getData(); for(Notes item:mList)&#123; if (item.getContent().length()&gt;15)&#123; item.setContent(item.getContent().substring(0,14)+&quot;...&quot;); &#125; &#125; pageParam.setData(mList); request.setAttribute(&quot;pageParam&quot;, pageParam); return &quot;index&quot;; &#125; //删除notes @RequestMapping(value=&quot;cancel&quot;) public void cancel(HttpServletRequest request, HttpServletResponse response) throws IOException&#123; int id=Integer.valueOf(request.getParameter(&quot;id&quot;)); System.out.println(id); service.cancel(id); response.sendRedirect(&quot;index.html&quot;); &#125; //APP删除notes @RequestMapping(value=&quot;cancelApp&quot;) public void cancelApp(HttpServletRequest request, HttpServletResponse response) throws IOException&#123; int id=Integer.valueOf(request.getParameter(&quot;id&quot;)); System.out.println(id); service.cancel(id); &#125; //增加notes @RequestMapping(value=&quot;add&quot;) public String addNotes()&#123; return &quot;add&quot;; &#125; @RequestMapping(value=&quot;addNotes&quot;) public void addOne(HttpServletRequest request,HttpServletResponse response) throws IOException&#123; String content=request.getParameter(&quot;content&quot;); Notes notes=new Notes(); notes.setContent(content); notes.setTime(new Date()); notes.setStatus(1); service.addNotes(notes); &#125; //App返回json类型的数据 @RequestMapping(value=&quot;json&quot;) public String jsontest(HttpServletRequest request)&#123; int notesCount = service.getNotesCount(); PageParam pageParam = new PageParam(); pageParam.setNotesCount(notesCount); pageParam = service.getPageParm(pageParam); //将数据生成json格式 JSONArray jsonArray=new JSONArray(); SimpleDateFormat format; format =new SimpleDateFormat(&quot;yyyy年MM月dd日 HH:mm:ss&quot;); for (int i=0;i&lt;notesCount;i++)&#123; JSONObject object= new JSONObject(); object.put(&quot;id&quot;, pageParam.getData().get(i).getId()); object.put(&quot;content&quot;, pageParam.getData().get(i).getContent()); object.put(&quot;time&quot;, format.format(pageParam.getData().get(i).getTime())); object.put(&quot;status&quot;, pageParam.getData().get(i).getStatus()); jsonArray.add(object); &#125; request.setAttribute(&quot;result&quot;,jsonArray.toString()); return &quot;json&quot;; &#125;&#125; 编写Service&emsp;&emsp;Service通知DAO层进行数据处理123456789101112131415161718192021@Resource NotesDao dao ; //获取note总数量 public int getNotesCount() &#123; return dao.getNotesCount(); &#125; //获取满足条件的note public PageParam getPageParm(PageParam pageParam) &#123; List&lt;Notes&gt; notesList = dao.getNotes(); pageParam.setData(notesList); return pageParam; &#125; //删除note public void cancel(int id) &#123; dao.cancel(id); &#125; //添加note public void addNotes(Notes notes) &#123; System.out.println(&quot;添加一条note&quot;); dao.addNotes(notes); &#125; 配置applicationContext.xml&emsp;&emsp;MyBatis的配置设置123456789101112131415161718192021222324252627282930313233343536373839404142&lt;!-- MyBatis配置 --&gt; &lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt; &lt;!-- 显式指定Mapper文件位置 --&gt; &lt;property name=&quot;mapperLocations&quot; value=&quot;classpath*:/mybatis/*Mapper.xml&quot; /&gt; &lt;!-- mybatis配置文件路径 --&gt; &lt;property name=&quot;configLocation&quot; value=&quot;classpath:/mybatis/config.xml&quot;/&gt; &lt;/bean&gt; &lt;bean id=&quot;sqlSessionTemplate&quot; class=&quot;org.mybatis.spring.SqlSessionTemplate&quot;&gt; &lt;constructor-arg index=&quot;0&quot; ref=&quot;sqlSessionFactory&quot; /&gt; &lt;!-- 这个执行器会批量执行更新语句, 还有SIMPLE 和 REUSE --&gt; &lt;constructor-arg index=&quot;1&quot; value=&quot;BATCH&quot; /&gt; &lt;/bean&gt; &lt;!-- 扫描basePackage接口 --&gt; &lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt; &lt;!-- 映射器接口文件的包路径， --&gt; &lt;property name=&quot;basePackage&quot; value=&quot;com.pansaian.myweb.dao&quot; /&gt; &lt;/bean&gt; &lt;!-- 使用annotation定义事务 --&gt; &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; proxy-target-class=&quot;true&quot; /&gt; &lt;!-- 数据源配置, 使用Tomcat JDBC连接池 --&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.tomcat.jdbc.pool.DataSource&quot; destroy-method=&quot;close&quot;&gt; &lt;!-- Connection Info --&gt; &lt;property name=&quot;driverClassName&quot; value=&quot;$&#123;jdbc.driver&#125;&quot; /&gt; &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot; /&gt; &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot; /&gt; &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot; /&gt; &lt;!-- Connection Pooling Info --&gt; &lt;property name=&quot;maxActive&quot; value=&quot;$&#123;jdbc.pool.maxActive&#125;&quot; /&gt; &lt;property name=&quot;maxIdle&quot; value=&quot;$&#123;jdbc.pool.maxIdle&#125;&quot; /&gt; &lt;property name=&quot;minIdle&quot; value=&quot;0&quot; /&gt; &lt;property name=&quot;defaultAutoCommit&quot; value=&quot;false&quot; /&gt; &lt;/bean&gt; &lt;!-- production环境 --&gt; &lt;beans profile=&quot;production&quot;&gt; &lt;context:property-placeholder ignore-unresolvable=&quot;true&quot; file-encoding=&quot;utf-8&quot; location=&quot;classpath:config.properties,classpath:jdbc.properties&quot; /&gt; &lt;/beans&gt; 编写DAO层1234567@Repositorypublic interface NotesDao &#123; int getNotesCount(); List&lt;Notes&gt; getNotes(); void cancel(int id); void addNotes(Notes notes);&#125; 编写Mapper文件&emsp;&emsp;虽然Mapper文件可以用Java来写，但是Mapper的初衷就是希望SQL不要侵入到Java语言中，所以用配置文件来写Mapper12345678910111213141516171819&lt;mapper namespace=&quot;com.pansaian.myweb.dao.NotesDao&quot;&gt; &lt;!--获得note数量 --&gt; &lt;select id=&quot;getNotesCount&quot; resultType=&quot;int&quot;&gt; select count(*) from notes where status=1 &lt;/select&gt; &lt;!--获得note，并且按时间排序 --&gt; &lt;select id=&quot;getNotes&quot; resultType=&quot;com.pansaian.myweb.entity.Notes&quot; &gt; select * from notes where status=1 order by time desc &lt;/select&gt; &lt;!--删除指定ID的note --&gt; &lt;update id=&quot;cancel&quot; parameterType=&quot;int&quot; &gt; update notes set status=0 where id=#&#123;id&#125; &lt;/update&gt; &lt;!--添加一条note --&gt; &lt;insert id=&quot;addNotes&quot; parameterType=&quot;com.pansaian.myweb.entity.Notes&quot;&gt; insert into notes(content,time,status) values(#&#123;content&#125;,#&#123;time&#125;,#&#123;status&#125;) &lt;/insert&gt;&lt;/mapper&gt; 其他问题备注note输出到JSP页面&emsp;&emsp; 这里我们用 c:foreach 标签循环输出note，日期用 fmt:formatDate 标签进行格式化12345678910c:forEach items=&quot;$&#123;pageParam.data &#125;&quot; var=&quot;item&quot; varStatus=&quot;status&quot;&gt; &lt;li&gt; &lt;div class=&quot;note&quot;&gt; &lt;em&gt;$&#123;status.count &#125;&lt;/em&gt; &lt;h3&gt;$&#123;item.content &#125;&lt;/h3&gt; &lt;span&gt;&lt;fmt:formatDate pattern=&quot;MM-dd&quot; value=&quot;$&#123;item.time&#125;&quot; /&gt;&lt;/span&gt; &lt;a href=&quot;cancel.html?id=$&#123;item.id &#125;&quot;&gt;&lt;/a&gt; &lt;/div&gt; &lt;/li&gt;&lt;/c:forEach&gt; 添加新note后窗体关闭问题及页面刷新问题&emsp;&emsp;这个问题暂时没有我还没想到好的解决办法，在以后版本中解决123456789&lt;form class=&quot;form&quot; action=&quot;addNotes.html&quot;&gt; &lt;textarea class=&quot;content&quot; name=&quot;content&quot;&gt;&lt;/textarea&gt; &lt;script&gt; document.getElementById(&quot;isubmit&quot;).onclick=function()&#123; window.close(); &#125; &lt;/script&gt; &lt;input class=&quot;ibutton&quot; type=&quot;submit&quot; value=&quot;添加&quot; id=&quot;isubmit&quot;/&gt; &lt;/form&gt;","categories":[{"name":"JavaWeb","slug":"JavaWeb","permalink":"https://teleporter.top/categories/JavaWeb/"}],"tags":[{"name":"Web","slug":"Web","permalink":"https://teleporter.top/tags/Web/"},{"name":"SpringMVC，Mybatis","slug":"SpringMVC，Mybatis","permalink":"https://teleporter.top/tags/SpringMVC，Mybatis/"}]},{"title":"AS设置及问题汇总（不定期更新）","slug":"AS设置及问题汇总（不定期更新）","date":"2017-04-25T13:41:37.000Z","updated":"2017-04-25T14:13:18.914Z","comments":true,"path":"2017/04/25/AS设置及问题汇总（不定期更新）/","link":"","permalink":"https://teleporter.top/2017/04/25/AS设置及问题汇总（不定期更新）/","excerpt":"&emsp;&emsp;Android Studio的软件设置及问题汇总，长期更新。","text":"&emsp;&emsp;Android Studio的软件设置及问题汇总，长期更新。 软件设置初始设置，界面与字体。 设置自动导包 问题汇总","categories":[{"name":"Software","slug":"Software","permalink":"https://teleporter.top/categories/Software/"}],"tags":[{"name":"AS","slug":"AS","permalink":"https://teleporter.top/tags/AS/"},{"name":"Settings","slug":"Settings","permalink":"https://teleporter.top/tags/Settings/"}]},{"title":"使用Hexo+Github搭建个人博客","slug":"使用Hexo-Github搭建个人博客","date":"2017-04-16T13:41:59.000Z","updated":"2017-04-18T01:15:22.296Z","comments":true,"path":"2017/04/16/使用Hexo-Github搭建个人博客/","link":"","permalink":"https://teleporter.top/2017/04/16/使用Hexo-Github搭建个人博客/","excerpt":"&emsp;&emsp;Hexo是一个简单、快速、强大的基于 Github Pages的博客发布工具，支持Markdown格式，有众多优秀插件和主题。","text":"&emsp;&emsp;Hexo是一个简单、快速、强大的基于 Github Pages的博客发布工具，支持Markdown格式，有众多优秀插件和主题。 问题汇总 indigo主题无法从github上Clone下来 &emsp;&emsp;SSH key没有在GitHub上正确配置，配置完后测试是否成功 1$ ssh -T git@git@github.com 域名解析，无法访问到github &emsp;&emsp;需要在GitHub中添加CNAME文件，如图。 参考 Hexo+Github搭建教程 Indigo主题配置 markdown官方文档","categories":[{"name":"other","slug":"other","permalink":"https://teleporter.top/categories/other/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"https://teleporter.top/tags/hexo/"},{"name":"github","slug":"github","permalink":"https://teleporter.top/tags/github/"},{"name":"阿里云","slug":"阿里云","permalink":"https://teleporter.top/tags/阿里云/"}]}]}